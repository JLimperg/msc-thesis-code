# Model

Like the 'covariant presheaf' model, but with contravariant presheaves.


## Prerequisites

### Sizes

The set of sizes is

  ğ•† â‰” â„• âŠ {âˆ, â‹†}.
  
We define < on ğ•† by

- n < m âˆˆ ğ•† iff n < m âˆˆ â„•
- n < âˆ < â‹†   âˆ€ n âˆˆ â„•.

(ğ•†, <) is a preorder category. We write ğ•†<n for the subcategory of ğ•† containing
all sizes m < n.


## âŠ¢ Î”

âŸ¦âŠ¢ Î”âŸ§ : Cats

âŸ¦âŠ¢ ()âŸ§ â‰” âŠ¤  [the terminal category]

âŸ¦âŠ¢ Î”, nâŸ§ â‰”
  - objects: pairs (Î´ âˆˆ âŸ¦Î”âŸ§, m âˆˆ ğ•†<(âŸ¦Î” âŠ¢ nâŸ§ Î´))
  - morphisms: f : (Î´, m) â†’ (Î´â€², mâ€²) is a pair (fâ‚€ : Î´ â‰¤ Î´â€² âˆˆ âŸ¦Î”âŸ§, fâ‚ : m â‰¤ mâ€² âˆˆ ğ•†)
  [rest trivial]
  
Ï€â‚ : âŸ¦Î”, nâŸ§ â†’ âŸ¦Î”âŸ§
Ï€â‚ (Î´, m) â‰” Î´
Ï€â‚ (Î´ â‰¤ Î´â€², m â‰¤ mâ€²) â‰” Î´ â‰¤ Î´â€²

Ï€â‚‚ : âŸ¦Î”, nâŸ§ â†’ ğ•†
Ï€â‚‚ (Î´, m) â‰” m
Ï€â‚‚ (Î´ â‰¤ Î´â€², m â‰¤ mâ€²) â‰” m â‰¤ mâ€²


## Î” âŠ¢ n

âŸ¦Î” âŠ¢ nâŸ§ : âŸ¦Î”âŸ§ â†’ ğ•†

âŸ¦Î”, n âŠ¢ v0âŸ§ : Î£ âŸ¦Î”âŸ§ Fâ‚™ â†’ ğ•†
âŸ¦Î”, n âŠ¢ v0âŸ§ â‰” ğ•†<â†’ğ•† âˆ˜ Ï€â‚‚

âŸ¦Î”, n âŠ¢ vsuc xâŸ§ : Î£ âŸ¦Î”âŸ§ Fâ‚™ â†’ ğ•†
âŸ¦Î”, n âŠ¢ vsuc xâŸ§ â‰” âŸ¦Î” âŠ¢ xâŸ§ âˆ˜ Ï€â‚
  given
    âŸ¦Î” âŠ¢ nâŸ§ : âŸ¦Î”âŸ§ â†’ ğ•†
    âŸ¦Î” âŠ¢ xâŸ§ : âŸ¦Î”âŸ§ â†’ ğ•†

âŸ¦Î” âŠ¢ 0âŸ§ : âŸ¦Î”âŸ§ â†’ ğ•†
âŸ¦Î” âŠ¢ 0âŸ§ â‰” Const 0

[similar for âˆ and â‹†]

âŸ¦Î” âŠ¢ â†‘ nâŸ§ : âŸ¦Î”âŸ§ â†’ ğ•†
âŸ¦Î” âŠ¢ â†‘ nâŸ§ â‰” (+ 1) âˆ˜ âŸ¦Î” âŠ¢ nâŸ§
  given
    âŸ¦Î” âŠ¢ n < âˆâŸ§ : âˆ€ Î´ âˆˆ âŸ¦Î”âŸ§. âŸ¦Î” âŠ¢ nâŸ§ Î´ < âˆ
    
    
## Î” âŠ¢ n < m

âŸ¦Î” âŠ¢ n < mâŸ§ : âˆ€ Î´ âˆˆ âŸ¦Î”âŸ§. âŸ¦Î” âŠ¢ nâŸ§ Î´ < âŸ¦Î” âŠ¢ nâŸ§ Î´

[trivial]


## Î” âŠ¢ T

âŸ¦Î” âŠ¢ TâŸ§ : âŸ¦Î”âŸ§áµ’áµ– â†’ Sets

âŸ¦Î” âŠ¢ â„• nâŸ§ Î´ â‰” â„•â‰¤(âŸ¦nâŸ§ Î´)
âŸ¦Î” âŠ¢ â„• nâŸ§ (Î´ â‰¥ Î´â€²) : â„•â‰¤(âŸ¦nâŸ§ Î´) â†’ â„•â‰¤(âŸ¦nâŸ§ Î´â€²)
âŸ¦Î” âŠ¢ â„• nâŸ§ (Î´ â‰¥ Î´â€²) (m â‰¤ âŸ¦nâŸ§ Î´) â‰” m | âŸ¦nâŸ§ Î´â€²
  where
    m | n â‰” min m n
âŸ¦Î” âŠ¢ â„• nâŸ§ (id : Î´ â‰¥ Î´) (m â‰¤ âŸ¦nâŸ§ Î´) = m | âŸ¦nâŸ§ Î´ = m
âŸ¦Î” âŠ¢ â„• nâŸ§ (Î´â€² â‰¥ Î´â€³ âˆ˜ Î´ â‰¥ Î´â€²) (m â‰¤ âŸ¦nâŸ§ Î´)
  = m | âŸ¦nâŸ§ Î´â€³ 
  = (m | âŸ¦nâŸ§ Î´â€²) | âŸ¦nâŸ§ Î´â€³  [since âŸ¦nâŸ§ Î´â€² â‰¥ âŸ¦nâŸ§ Î´â€³]

âŸ¦Î” âŠ¢ ğ•Š nâŸ§ â‰” ğ•Šâ‰¥ âˆ˜ âŸ¦nâŸ§áµ’áµ–
  where
    ğ•Šâ‰¥ : ğ•†áµ’áµ– â†’ Sets
    ğ•Šâ‰¥ n â‰” (k â‰¤ n) â†’ â„•
    ğ•Šâ‰¥ (n â‰¥ m) (s : ğ•Šâ‰¥n) (k â‰¤ m) â‰” s k  [k â‰¤ m â‰¤ n]
    
âŸ¦Î” âŠ¢ T â‡’ UâŸ§ Î´ â‰” âˆ€ (Ïƒ â‰¤ Î´) â†’ âŸ¦TâŸ§ Ïƒ â†’ âŸ¦UâŸ§ Ïƒ
âŸ¦Î” âŠ¢ T â‡’ UâŸ§ (Î´ â‰¥ Î´â€²) (f : âˆ€ (Ïƒ â‰¤ Î´) â†’ âŸ¦TâŸ§ Ïƒ â†’ âŸ¦UâŸ§ Ïƒ) (Ïƒ â‰¤ Î´â€²) (t : âŸ¦TâŸ§ Ïƒ)
  â‰” f Ïƒ t   [Ïƒ â‰¤ Î´â€² â‰¤ Î´]
  
  [This is just the exponential of presheaves.]
  
âŸ¦Î” âŠ¢ âˆ€ n. TâŸ§ Î´ â‰” { f : âˆ€ (m < âŸ¦nâŸ§ Î´) â†’ âŸ¦TâŸ§ (Î´, m)
                 | f is downward-consistent }
  where
    f is downward-consistent â‰” âˆ€ (m mâ€² < âŸ¦nâŸ§ Î´) â†’ m â‰¤ mâ€² â†’ f m = âŸ¦TâŸ§ (Î´ â‰¥ Î´, mâ€²â‰¥m) (f mâ€²)
âŸ¦Î” âŠ¢ âˆ€ n. TâŸ§ (Î´ â‰¥ Î´â€²) : âŸ¦âˆ€ n. TâŸ§ Î´ â†’ âŸ¦âˆ€ n. TâŸ§ Î´â€²
âŸ¦Î” âŠ¢ âˆ€ n. TâŸ§ (Î´ â‰¥ Î´â€²) (f : âˆ€ (m < âŸ¦nâŸ§ Î´) â†’ âŸ¦TâŸ§ (Î´, m)) (m < âŸ¦nâŸ§ Î´â€²) â‰” g
  where
     g â‰” Î» (m < âŸ¦nâŸ§ Î´â€²) â†’ Ï€â‚áµ’áµ– (Î´ â‰¥ Î´â€²) (f m)
     m < âŸ¦nâŸ§ Î´â€² â‰¤ âŸ¦nâŸ§ Î´ by functoriality of âŸ¦nâŸ§
     
     For downward-consistency of g, assume m, mâ€² < âŸ¦nâŸ§ Î´â€² with m â‰¤ mâ€². Then
     âŸ¦TâŸ§ (Î´ â‰¥ Î´, mâ€²â‰¥m) (g mâ€²)
     = âŸ¦TâŸ§ (Î´ â‰¥ Î´, mâ€²â‰¥m) (Ï€â‚áµ’áµ– (Î´ â‰¥ Î´â€²) (f mâ€²))
     = Ï€â‚áµ’áµ– (Î´ â‰¥ Î´â€²) (âŸ¦TâŸ§ (Î´ â‰¥ Î´, mâ€²â‰¥m) (f mâ€²))   [?]
     = Ï€â‚áµ’áµ– (Î´ â‰¥ Î´â€²) (f m)
     = g m
     
     
## Î” âŠ¢ Î“

âŸ¦Î” âŠ¢ Î“âŸ§ : âŸ¦Î”âŸ§áµ’áµ– â†’ Sets

âŸ¦Î” âŠ¢ ()âŸ§ â‰” Const âŠ¤

âŸ¦Î” âŠ¢ Î“, TâŸ§ â‰” âŸ¦Î” âŠ¢ Î“âŸ§ Ã— âŸ¦Î” âŠ¢ TâŸ§


## Î”; Î“ âŠ¢ t : T

âŸ¦Î”; Î“ âŠ¢ t : TâŸ§ : âŸ¦Î” âŠ¢ Î“âŸ§ â†’ âŸ¦Î” âŠ¢ TâŸ§ âˆˆ Fun(âŸ¦Î”âŸ§áµ’áµ–, Sets)

âŸ¦Î”; Î“, T âŠ¢ v0 : TâŸ§ : âŸ¦Î” âŠ¢ Î“, TâŸ§ â†’ âŸ¦Î” âŠ¢ TâŸ§
âŸ¦v0âŸ§ â‰” Ï€â‚‚

âŸ¦Î”; Î“, U âŠ¢ vsuc x : TâŸ§ : âŸ¦Î” âŠ¢ Î“, UâŸ§ â†’ âŸ¦Î” âŠ¢ TâŸ§
âŸ¦vsuc xâŸ§ â‰” âŸ¦Î”; Î“ âŠ¢ x : TâŸ§ âˆ˜ Ï€â‚

âŸ¦Î”; Î“ âŠ¢ Î» T. t : T â‡’ UâŸ§ : âŸ¦Î” âŠ¢ Î“âŸ§ â†’ âŸ¦Î” âŠ¢ T â‡’ UâŸ§
âŸ¦Î» T. tâŸ§ : âˆ€ Î´ â†’ âŸ¦Î” âŠ¢ Î“âŸ§ Î´ â†’ âŸ¦Î” âŠ¢ T â‡’ UâŸ§ Î´
         = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´     â†’ âˆ€ (Ïƒ â‰¤ Î´) â†’ âŸ¦TâŸ§ Ïƒ â†’ âŸ¦UâŸ§ Ïƒ
âŸ¦Î» T. tâŸ§ Î´ Î³ Ïƒ t â‰” TODO
  
âŸ¦Î”; Î“ âŠ¢ zero : âˆ€ â‹†. â„• v0âŸ§ : âŸ¦Î” âŠ¢ Î“âŸ§ â†’ âŸ¦Î” âŠ¢ âˆ€ â‹†. â„• v0âŸ§
âŸ¦zeroâŸ§ : âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´ â†’ âŸ¦âˆ€ â‹†. â„• v0âŸ§ Î´
       = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (m < â‹†) â†’ âŸ¦â„• v0âŸ§ (Î´, m)
       = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (m < â‹†) â†’ â„•â‰¤m
âŸ¦zeroâŸ§ Î´ Î³ m â‰” 0

âŸ¦Î”; Î“ âŠ¢ suc : âˆ€ â‹†. âˆ€ v0. â„• v0 â‡’ â„• v1âŸ§
  : âŸ¦Î” âŠ¢ Î“âŸ§ â†’ âŸ¦Î” âŠ¢ âˆ€ â‹†. âˆ€ v0. â„• v0 â‡’ â„• v1âŸ§
âŸ¦sucâŸ§ : âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´ â†’ âŸ¦âˆ€ â‹†. âˆ€ v0. â„• v0 â‡’ â„• v1âŸ§ Î´
      = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´
        â†’ âˆ€ (mâ‚ < â‹†)
        â†’ âŸ¦âˆ€ v0. â„• v0 â‡’ â„• v1âŸ§ (Î´, mâ‚)
      = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´
        â†’ âˆ€ (mâ‚ < â‹†)
        â†’ âˆ€ (mâ‚‚ < mâ‚)
        â†’ âŸ¦â„• v0 â‡’ â„• v1âŸ§ (Î´, mâ‚, mâ‚‚)
      = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´
        â†’ âˆ€ (mâ‚ < â‹†)
        â†’ âˆ€ (mâ‚‚ < mâ‚)
        â†’ âˆ€ ((Ïƒâ‚, mâ‚ƒ, mâ‚„) â‰¤ (Î´, mâ‚, mâ‚‚))
        â†’ âŸ¦â„• v0âŸ§ (Ïƒâ‚, mâ‚ƒ, mâ‚„)
        â†’ âŸ¦â„• v1âŸ§ (Ïƒâ‚, mâ‚ƒ, mâ‚„)
      = âˆ€ Î´ â†’ âŸ¦Î“âŸ§ Î´
        â†’ âˆ€ (mâ‚ < â‹†)
        â†’ âˆ€ (mâ‚‚ < mâ‚)
        â†’ âˆ€ ((Ïƒâ‚, mâ‚ƒ, mâ‚„) â‰¤ (Î´, mâ‚, mâ‚‚))
        â†’ â„•â‰¤mâ‚„
        â†’ â„•â‰¤mâ‚ƒ
âŸ¦sucâŸ§ Î´ Î³ mâ‚ mâ‚‚ (Ïƒâ‚, mâ‚ƒ, mâ‚„) n â‰” n + 1
  where
    n â‰¤ mâ‚„ < mâ‚ƒ, so n + 1 â‰¤ mâ‚ƒ

âŸ¦fixâŸ§ Î´ : âŸ¦Î“âŸ§ Î´ â†’ âŸ¦(âˆ€ Î±<â‹†. (âˆ€ Î²<Î±. T Î²) â†’ T Î±) â†’ âˆ€ Î±<â‹†. T Î±âŸ§ Î´
        = âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (Ïƒâ‚ â‰¤ Î´)
                â†’ âŸ¦âˆ€ Î±<â‹†. (âˆ€ Î²<Î±. T Î²) â†’ T Î±âŸ§ Ïƒâ‚
                â†’ âŸ¦âˆ€ Î±<â‹†. T Î±âŸ§ Ïƒâ‚
        = âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (Ïƒâ‚ â‰¤ Î´)
                â†’ (âˆ€ (m < âŸ¦â‹†âŸ§ Ïƒâ‚)
                   â†’ âŸ¦(âˆ€ Î²<Î±. T Î²) â†’ T Î±âŸ§ (Ïƒâ‚, m))
                â†’ âˆ€ (m < âŸ¦â‹†âŸ§ Ïƒâ‚)
                â†’ âŸ¦TâŸ§ (Ïƒâ‚, m)
        = âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (Ïƒâ‚ â‰¤ Î´)
                â†’ (âˆ€ (m < â‹†)
                   â†’ âˆ€ ((Ïƒâ‚‚, mâ‚) â‰¤ (Ïƒâ‚, m))
                   â†’ âŸ¦âˆ€ Î²<Î±. T Î²âŸ§ (Ïƒâ‚‚, mâ‚)
                   â†’ âŸ¦TâŸ§ (Ïƒâ‚‚, mâ‚))
                â†’ âˆ€ (m < â‹†)
                â†’ âŸ¦TâŸ§ (Ïƒâ‚, m)
        = âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (Ïƒâ‚ â‰¤ Î´)
                â†’ (âˆ€ (m < â‹†)
                   â†’ âˆ€ ((Ïƒâ‚‚, mâ‚) â‰¤ (Ïƒâ‚, m))
                   â†’ (âˆ€ (mâ‚‚ < mâ‚)
                      â†’ âŸ¦T Î²âŸ§ (Ïƒâ‚‚, mâ‚, mâ‚‚))
                   â†’ âŸ¦TâŸ§ (Ïƒâ‚‚, mâ‚))
                â†’ âˆ€ (m < â‹†)
                â†’ âŸ¦TâŸ§ (Ïƒâ‚, m)
        = âŸ¦Î“âŸ§ Î´ â†’ âˆ€ (Ïƒâ‚ â‰¤ Î´)
                â†’ (âˆ€ (m < â‹†)
                   â†’ âˆ€ ((Ïƒâ‚‚, mâ‚) â‰¤ (Ïƒâ‚, m))
                   â†’ (âˆ€ (mâ‚‚ < mâ‚)
                      â†’ âŸ¦TâŸ§ (Ïƒâ‚‚, mâ‚‚))
                   â†’ âŸ¦TâŸ§ (Ïƒâ‚‚, mâ‚))
                â†’ âˆ€ (m < â‹†)
                â†’ âŸ¦TâŸ§ (Ïƒâ‚, m)
âŸ¦fixâŸ§ Î´ (Î³ : âŸ¦Î“âŸ§ Î´) (Ïƒâ‚ â‰¤ Î´) (rec : âˆ€ m ((Ïƒâ‚‚, mâ‚) â‰¤ (Ïƒâ‚, m)) â†’ (âˆ€ mâ‚‚ < mâ‚ â†’ âŸ¦TâŸ§ (Ïƒâ‚‚, mâ‚‚)) â†’ âŸ¦TâŸ§ (Ïƒâ‚‚, mâ‚)) m
  â‰” rec m (Ïƒâ‚, m) f
  where
    f : âˆ€ mâ‚‚ < m â†’ âŸ¦TâŸ§ (Ïƒâ‚, mâ‚‚)
    f mâ‚‚ â‰” âŸ¦fixâŸ§ Î´ Î³ Ïƒâ‚ rec mâ‚‚
