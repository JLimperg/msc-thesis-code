# Î»ST

## Syntax

Variable x
  âˆ·= v0
  |  vsuc x


Size n, m, o
  âˆ·= x
  |  0
  |  â†‘ n
  |  âˆ
  |  â‹†
  
  
Size context Î”
  âˆ·= ()
  |  Î”, n
  

Type T, U, V
  âˆ·= â„• n
  |  ğ•Š n
  |  T â‡’ U
  |  âˆ€ n. T
  

Type context Î“
  âˆ·= ()
  |  Î“, T
  

Term t, u, v
  âˆ·= x
  |  Î» T. t
  |  t u
  |  Î» n. t
  |  t n
  |  fix
  |  zero
  |  suc
  |  caseâ„•[T]
  |  cons
  |  head
  |  tail
  
  
## Typing

### âŠ¢ Î” (context formation)

â€“â€“â€“â€“
âŠ¢ ()


Î” âŠ¢ n
â€“â€“â€“â€“â€“â€“
âŠ¢ Î”, n


### Î” âŠ¢ n (size formation)

Î” âŠ¢ n
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”, n âŠ¢ v0


Î” âŠ¢ x   Î” âŠ¢ n
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”, n âŠ¢ vsuc x


âŠ¢ Î”
â€“â€“â€“â€“â€“
Î” âŠ¢ 0
Î” âŠ¢ âˆ
Î” âŠ¢ â‹†


Î” âŠ¢ n < âˆ
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ â†‘ n


### Î” âŠ¢ n < m (strict size comparison)

Î” âŠ¢ n
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”, n âŠ¢ v0 < n


Î” âŠ¢ x < n   Î” âŠ¢ m
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”, m âŠ¢ vsuc x < n


âŠ¢ Î”
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ 0 < âˆ


Î” âŠ¢ n < âˆ
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ â†‘ n < âˆ


Î” âŠ¢ n < âˆ
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ n < â†‘ n


Î” âŠ¢ n < âˆ
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ n < â‹†


âŠ¢ Î”
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ âˆ < â‹†


Î” âŠ¢ n < m   Î” âŠ¢ m < k
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“   [maybe this is already admissible]
Î” âŠ¢ n < k


### Î” âŠ¢ T (type formation)

Î” âŠ¢ n < â‹†
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ â„• n


Î” âŠ¢ n < â‹†
â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ ğ•Š n


Î” âŠ¢ T   Î” âŠ¢ U
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ T â‡’ U


Î”, n âŠ¢ T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ âˆ€ n. T


### Î” âŠ¢ Î“ (context formation)

âŠ¢ Î”
â€“â€“â€“â€“â€“â€“
Î” âŠ¢ ()


Î” âŠ¢ Î“   Î” âŠ¢ T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î” âŠ¢ Î“, T


### Î”; Î“ âŠ¢ t : T (term typing)

Î” âŠ¢ Î“   Î” âŠ¢ T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“, T âŠ¢ v0 : T


Î”; Î“ âŠ¢ x : T   Î” âŠ¢ U
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“, U âŠ¢ vsuc x : T


Î”; Î“, T âŠ¢ t : U
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ Î» T. t : T â‡’ U


Î”; Î“ âŠ¢ t : T â‡’ U   Î”; Î“ âŠ¢ u : T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ t u : U


Î”, n; wk Î“ âŠ¢ t : T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ Î» n. t : âˆ€ n. T


Î”; Î“ âŠ¢ t : âˆ€ m. T   Î” âŠ¢ n < m
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ t n : T[n]


Î” âŠ¢ Î“
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ zero : âˆ€ â‹†. â„• v0
Î”; Î“ âŠ¢ suc : âˆ€ â‹†. âˆ€ v0. â„• v0 â‡’ â„• v1
Î”; Î“ âŠ¢ cons : âˆ€ â‹†. â„• âˆ â‡’ (âˆ€ v0. ğ•Š v0) â‡’ ğ•Š v0
Î”; Î“ âŠ¢ head : âˆ€ â‹†. ğ•Š v0 â‡’ â„• âˆ
Î”; Î“ âŠ¢ tail : âˆ€ â‹†. ğ•Š v0 â‡’ âˆ€ v0. ğ•Š v0


Î” âŠ¢ Î“   Î” âŠ¢ T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ caseâ„•[T] : âˆ€ â‹†. â„• v0 â‡’ T â‡’ (âˆ€ v0 â‡’ â„• v0 â‡’ T) â‡’ T


Î” âŠ¢ Î“   Î”, â‹† âŠ¢ T
â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
Î”; Î“ âŠ¢ fix[T âˆ™] : (âˆ€ â‹†. (âˆ€ v0. T v0) â‡’ T v0) â‡’ âˆ€ â‹†. T v0


## Reduction

### t âŸ¶Î² u

(Î» T. t) u âŸ¶ t[u]

(Î» n. t) m âŸ¶ t[m]

caseâ„•[T] n (zero n) z s âŸ¶ z

caseâ„•[T] n (suc n m i) z s âŸ¶ s m i

head n (cons n x xs) âŸ¶ x

tail n (cons n x xs) âŸ¶ xs

fix[T âˆ™] f n âŸ¶ f n (fix[T âˆ™] f)

[+ congruence closure]


### t =Î² u

[the equivalence closure of âŸ¶Î²]


## Programming Examples

zeros : âˆ€ â‹†. ğ•Š v0
zeros â‰” fix[ğ•Š âˆ™] Î» (n < â‹†) (rec : âˆ€ (m < n). ğ•Š m).
        cons n (zero âˆ) rec


zerosâˆ : ğ•Š âˆ
zerosâˆ â‰” zeros âˆ


map : (â„• âˆ â‡’ â„• âˆ) â‡’ âˆ€ â‹†. ğ•Š v0 â‡’ ğ•Š v0
map â‰” Î» (f : â„• âˆ â‡’ â„• âˆ).
      fix[ğ•Š âˆ™ â‡’ ğ•Š âˆ™] Î» (n < â‹†) (rec : âˆ€ (m < n). ğ•Š m â‡’ ğ•Š m) (xs : ğ•Š n).
      cons n (f (head n xs)) (Î» (m < n). rec m (tail n xs m)) 
      
      
upâ„• : âˆ€ â‹†. âˆ€ v0. â„• v0 â‡’ â„• v1
upâ„• â‰” Î» (n < â‹†) (m < n) (i : â„• m).
        caseâ„•[â„• n] m i
          zero n
          Î» (k < m) (j : â„• k).
            suc n k j


half : âˆ€ â‹†. â„• v0 â‡’ â„• v0
half â‰” fix[â„• âˆ™ â‡’ â„• âˆ™] Î» (n < â‹†) (rec : âˆ€ (m < n). â„• m â‡’ â„• m) (i : â„• n).
         caseâ„•[â„• n] n i
           (zero n)
           Î» (m < n) (j : â„• m).
             caseâ„•[â„• n] m j
               (zero n)
               Î» (k < m) (l : â„• k).
                 upâ„• n k (rec k l)
